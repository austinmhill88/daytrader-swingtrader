environment: paper  # "paper" or "live"

alpaca:
  key_id: ${APCA_API_KEY_ID}
  secret_key: ${APCA_API_SECRET_KEY}
  base_url: ${APCA_API_BASE_URL}
  data_feed: "sip"  # "iex" or "sip" (requires subscription)
  reconnect_attempts: 5
  reconnect_delay: 10  # seconds

universe:
  min_price: 5.0
  max_spread_bps: 50
  adv_lookback_days: 60
  top_by_dollar_volume: 500
  # Default universe for demo (override with dynamic universe builder)
  default_symbols:
    - AAPL
    - MSFT
    - AMZN
    - NVDA
    - GOOGL
    - TSLA
    - META
    - SPY
    - QQQ

strategies:
  intraday_mean_reversion:
    enabled: true
    min_bar_minutes: 1
    zscore_entry: 2.0
    zscore_exit: 0.5
    atr_stop_multiplier: 1.5
    max_positions: 20
    min_volume: 100000  # minimum daily volume
    time_filters:
      skip_first_minutes: 3
      reduce_last_minutes: 5
      flatten_eod: true
    lookback_periods:
      zscore_window: 20
      atr_window: 14
      vwap_window: 20
  
  swing_trend_following:
    enabled: true
    ema_fast: 20
    ema_slow: 50
    adx_threshold: 20
    atr_stop_multiplier: 2.0
    trailing_atr_multiplier: 3.0
    max_positions: 10
    min_adx: 15
    holding_period_min: 1  # days
    holding_period_max: 10  # days
    pullback_threshold_pct: 2.0

risk:
  daily_max_drawdown_pct: 2.0
  per_trade_risk_pct: 0.4
  max_position_size_pct: 5.0  # max % of equity per position
  max_gross_exposure_pct_intraday: 50
  max_gross_exposure_pct_swing: 100
  short_exposure_cap_pct: 50
  kill_switch: true
  max_positions_total: 30
  min_trade_size_usd: 100
  max_trade_size_usd: 50000
  max_trades_per_day: 100
  max_losses_per_day: 3  # consecutive losses before pause
  
execution:
  default_order_type: "limit"
  max_child_order_pct: 20
  limit_offset_bps: 5
  use_bracket_orders: true
  time_in_force: "day"
  partial_fill_threshold: 0.8  # accept partial fills > 80%
  order_timeout_seconds: 60
  max_slippage_bps: 20

metrics:
  enable_prometheus: false  # set to true if using Prometheus
  port: 9101
  enable_health_check: true
  health_check_port: 8080

storage:
  db_url: "sqlite:///./data/trading.db"
  logs_dir: "./logs"
  data_dir: "./data"
  backup_dir: "./data/backups"
  
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  rotation: "1 day"
  retention: "30 days"
  format: "json"  # "json" or "text"
  
alerts:
  slack_webhook: ${SLACK_WEBHOOK_URL}
  email_enabled: false
  alert_on_kill_switch: true
  alert_on_errors: true
  alert_on_daily_pnl_threshold: 5.0  # alert if daily PnL exceeds +/- 5%

session:
  pre_market_start: "09:00"  # EST
  market_open: "09:30"
  market_close: "16:00"
  post_market_end: "16:30"
  trading_enabled_pre_market: false
  trading_enabled_post_market: false
